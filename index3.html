<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body class="body">
    <h1 class="title">INDOVINA IL NUMERO</h1>
    <ol class="lista">
        <li>Il computer sceglierà segretamente un numero intero casuale tra 1 e 100.</li>
        <li>Il tuo obiettivo è indovinare questo numero segreto nel minor numero di tentativi possibile.</li>
        <li>Ad ogni tentativo, inserisci un numero e il computer ti darà un indizio:</li>
    </ol>
    <ul class="lista">
        <li>Se il tuo numero è troppo basso, ti dirà "Troppo basso, prova un numero più alto!"</li>
        <li>Se il tuo numero è troppo alto, ti dirà "Troppo alto, prova un numero più basso!"</li>
        <li>Se indovini il numero esatto, vincerai la partita!</li>
    </ul>
    <ol class="lista">
        <li>Continua a fare tentativi finché non indovini il numero magico.</li>
        <li>Alla fine del gioco, ti verrà mostrato il numero di tentativi che hai impiegato per indovinare.</li>
        <li>Sfida te stesso a indovinare il numero con il minor numero di tentativi possibile!</li>
    </ol>

    <p class="text">Inserisci il numero magico</p>
    <br>

    <form action="" method="get">
        <input id="prova" type="number" name="user_guess">
        <input id="btn" type="button" name="guess" value="Indovina">
    </form>

    <script>
        function getRandomIntegerV1(valoreMinimo, valoreMassimo) {
            // Funzione che restituisce un numero casuale intero compreso tra valori minimo e massimo passati come argomenti.
            // Utilizza la tecnica di aggiustamento valore massimo con restituzione finale della sola parte intera.
            let rand = valoreMinimo + Math.random() * (valoreMassimo - valoreMinimo + 1);
            return Math.floor(rand);
        }

        // 1. Dichiaro una variabile e con querySelector memorizzo il button
        let btn = document.querySelector("#btn")
        let prova = document.querySelector("#prova")
        let numeroDaIndovinare = getRandomIntegerV1(1, 100)
        console.log(numeroDaIndovinare)
        let tentativi = 5;
        let indovinato = false

        // 2. dichiaro un EVENT LISTENER sul button
        // Questa funzione viene eseguita SOLO dopo che l'utente clicca sul button
        // 1 prendo l'elemento html in cui l'utente ha scritto il numero
        // 2 Trasformo in intero il numero 
        // 3 Controllo i valori
        // 4 in console scrivo i risultati --> PER IL MOMENTO
        btn.addEventListener("click", () => {
            let provaValue = parseInt(prova.value)
            if (isNaN(provaValue)){
                alert("Valore non valido. Riprova")
            }
            
            // Se non ho indovinato, posso ancora giocare
            if (!indovinato) {
                // Se non ho finito i tentativi, posso ancora giocare
                if (tentativi != 0) {
                    // ho vinto?
                    if (provaValue == numeroDaIndovinare){
                        console.log("bravo")
                        indovinato = true
                    }
                    else {
                        // Non ho vinto
                        tentativi = tentativi - 1
                        if (tentativi != 0) {
                            if (provaValue > numeroDaIndovinare){
                                alert("Troppo grande " + tentativi + " tentativi rimasti")
                            }
                            else if (provaValue < numeroDaIndovinare){
                                alert("Troppo piccolo " + tentativi + " tentativi rimasti")
                            }
                        }
                    }
                }
                
                if (tentativi == 0) {
                    alert("Tentativi terminati, Game Over")
                }
            }
        })
    </script>
</body>
</html>